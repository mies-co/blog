<!DOCTYPE html><html><head><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.625 -apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}h1{margin-left:0;margin-right:0;margin-top:2.4375rem;padding-bottom:calc(0.40625rem - 1px);padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.21875rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;border-bottom:1px solid hsla(0,0%,0%,0.07);}h2{margin-left:0;margin-right:0;margin-top:1.625rem;padding-bottom:calc(0.40625rem - 1px);padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.40625rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;border-bottom:1px solid hsla(0,0%,0%,0.07);}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:hsla(0,0%,0%,0.53);font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}ul{margin-left:1.625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;font-size:0.85rem;line-height:1.625rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;font-size:1rem;line-height:1.625rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}blockquote{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:calc(0.8125rem - 1px);padding-right:0;padding-top:0;margin-bottom:0.8125rem;border-left:4px solid hsla(0,0%,0%,0.13);color:hsla(0,0%,0%,0.53);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(0.8125rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}b{font-weight:600;}strong{font-weight:600;}dt{font-weight:600;}th{font-weight:600;}li{margin-bottom:calc(0.8125rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.625rem;margin-bottom:calc(0.8125rem / 2);margin-top:calc(0.8125rem / 2);}li > ul{margin-left:1.625rem;margin-bottom:calc(0.8125rem / 2);margin-top:calc(0.8125rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(0.8125rem / 2);}code{font-size:0.85rem;line-height:1.625rem;}kbd{font-size:0.85rem;line-height:1.625rem;}samp{font-size:0.85rem;line-height:1.625rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.08333rem;padding-right:1.08333rem;padding-top:0.8125rem;padding-bottom:calc(0.8125rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}h3,h4,h5,h6{margin-bottom:0.8125rem;margin-top:1.625rem;}ol,ul{margin-left:2.03125rem;}li>ol,li>ul{margin-left:2.03125rem;}a{color:#4078c0;text-decoration:none;}a:hover,a:active{text-decoration:underline;}h1,h2,h3,h4,h5,h6{margin-top:0.8125rem;}</style><title>Mies - JS Massive code reuse - part 1</title><meta name="description" content="Reuse massive amounts of code in all your projects"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta charSet="utf-8"/><meta name="twitter:card" content="summary"/><meta name="twitter:creator" content="@astenmies"/><meta property="og:url" content="https://blog.mies.co/post/js-massive-code-reuse"/><meta property="og:site_name" content="Mies Blog"/><meta property="og:title" content="Mies - JS Massive code reuse - part 1"/><meta property="og:description" content="Reuse massive amounts of code in all your projects"/><meta property="og:image" content="https://blog.mies.co/static/media/js-massive-code-reuse-twitter.png"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.mies.co/post/js-massive-code-reuse"},"headline":"JS Massive code reuse - part 1","image":["https://blog.mies.co/static/media/js-massive-code-reuse-twitter.png"],"datePublished":"2020-08-21T00:00:00.000Z","dateModified":"2020-08-21T00:00:00.000Z","author":{"@type":"Person","name":"Asten Mies"},"publisher":{"@type":"Organization","name":"Mies","logo":{"@type":"ImageObject","url":"https://www.mies.co/static/mies-logo-2000x1000.png"}}}</script><meta name="next-head-count" content="12"/><link rel="preload" href="/_next/static/chunks/main-b859014e82ed87364a2e.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-3866a5765bde9782de2a.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.a5d4ffe593e18b49243e.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.b19af3ffebb408f580f7.js" as="script"/><link rel="preload" href="/_next/static/chunks/733641c3ea325c7dc13fdbe1e1ad4ebfa12ebc95.9ecd42dbbfb8fb85cf95.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-9ae67f25a20b040b1046.js" as="script"/><link rel="preload" href="/_next/static/chunks/9f96d65d.a303a7816d409d6bc67f.js" as="script"/><link rel="preload" href="/_next/static/chunks/1173eff4538ab0eae4f3f506dea9a7965770ad37.dbf64113d589543ca3d1.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/post/%5Bslug%5D-5815d22373be2c19dbbb.js" as="script"/><style data-styled="" data-styled-version="5.1.1">.bcMPWx{padding:2rem 4rem;}/*!sc*/
data-styled.g1[id="sc-AxjAm"]{content:"bcMPWx,"}/*!sc*/
.iekZH{position:relative;}/*!sc*/
.iekZH pre{padding-right:2.4rem !important;padding:2.4rem !important;}/*!sc*/
.cZIxqM{position:relative;}/*!sc*/
.cZIxqM pre{padding-right:2.4rem !important;padding:1rem 2.4rem !important;}/*!sc*/
data-styled.g2[id="sc-AxirZ"]{content:"iekZH,cZIxqM,"}/*!sc*/
.eSbheu{position:absolute;right:0;cursor:pointer;padding:0.8rem 0.8rem 0 0;}/*!sc*/
.eSbheu svg{color:rgb(233,241,251);font-size:1.4rem;outline:none;-webkit-transition:all 0.3s ease-in-out;transition:all 0.3s ease-in-out;}/*!sc*/
.eSbheu:hover svg{color:white;-webkit-transition:all 0.3s ease-in-out;transition:all 0.3s ease-in-out;}/*!sc*/
data-styled.g3[id="sc-AxiKw"]{content:"eSbheu,"}/*!sc*/
.eSwYtm{float:right;font-size:80%;position:relative;z-index:10;text-align:right;}/*!sc*/
data-styled.g4[id="sc-AxhCb"]{content:"eSwYtm,"}/*!sc*/
.fxWvvr{position:fixed;right:0.25rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;bottom:0.25rem;}/*!sc*/
data-styled.g5[id="sc-AxhUy"]{content:"fxWvvr,"}/*!sc*/
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,'Noto Sans',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol','Noto Color Emoji';}/*!sc*/
h1,h2,h3,h4,h5,h6{color:rgb(126,173,230);opacity:0.8;}/*!sc*/
h1,h2{margin-top:2.4rem;margin-bottom:1.2rem;}/*!sc*/
h3{margin-top:1.8rem;}/*!sc*/
a{color:rgb(255,27,65);cursor:pointer !important;}/*!sc*/
p{color:rgb(86,86,86);}/*!sc*/
code{display:inline-block;font-size:95%;}/*!sc*/
:not(pre) > code{padding:.1em .6em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:6px;}/*!sc*/
blockquote{background-color:#f6f6f6;padding-top:.5rem;padding-bottom:.5rem;font-size:95%;}/*!sc*/
blockquote p{color:rgb(150,150,150);}/*!sc*/
.react-share__ShareButton{margin-right:0.5rem;}/*!sc*/
button:focus{outline:none;}/*!sc*/
data-styled.g6[id="sc-global-feCxik1"]{content:"sc-global-feCxik1,"}/*!sc*/
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,'Noto Sans',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol','Noto Color Emoji';}/*!sc*/
h1,h2,h3,h4,h5,h6{color:rgb(126,173,230);opacity:0.8;}/*!sc*/
h1,h2{margin-top:2.4rem;margin-bottom:1.2rem;}/*!sc*/
h3{margin-top:1.8rem;}/*!sc*/
a{color:rgb(255,27,65);cursor:pointer !important;}/*!sc*/
p{color:rgb(86,86,86);}/*!sc*/
code{display:inline-block;font-size:95%;}/*!sc*/
:not(pre) > code{padding:.1em .6em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:6px;}/*!sc*/
blockquote{background-color:#f6f6f6;padding-top:.5rem;padding-bottom:.5rem;font-size:95%;}/*!sc*/
blockquote p{color:rgb(150,150,150);}/*!sc*/
.react-share__ShareButton{margin-right:0.5rem;}/*!sc*/
button:focus{outline:none;}/*!sc*/
data-styled.g7[id="sc-global-feCxik2"]{content:"sc-global-feCxik2,"}/*!sc*/
</style></head><body><div id="__next"><div class="sc-AxjAm bcMPWx"><header><h1><a href="/">Mies.co blog</a></h1></header><main><div class="sc-AxhCb eSwYtm">Last published on <!-- -->21 Aug 2020<br/>by<!-- --> <a href="https://twitter.com/astenmies">Asten<!-- --> <!-- -->Mies</a></div><div class="sc-AxhUy fxWvvr"><button aria-label="twitter" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#00aced"></circle><path d="M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z" fill="white"></path></svg></button><button aria-label="linkedin" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#007fb1"></circle><path d="M20.4,44h5.4V26.6h-5.4V44z M23.1,18c-1.7,0-3.1,1.4-3.1,3.1c0,1.7,1.4,3.1,3.1,3.1 c1.7,0,3.1-1.4,3.1-3.1C26.2,19.4,24.8,18,23.1,18z M39.5,26.2c-2.6,0-4.4,1.4-5.1,2.8h-0.1v-2.4h-5.2V44h5.4v-8.6 c0-2.3,0.4-4.5,3.2-4.5c2.8,0,2.8,2.6,2.8,4.6V44H46v-9.5C46,29.8,45,26.2,39.5,26.2z" fill="white"></path></svg></button><button aria-label="reddit" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#5f99cf"></circle><path d="m 52.8165,31.942362 c 0,-2.4803 -2.0264,-4.4965 -4.5169,-4.4965 -1.2155,0 -2.3171,0.4862 -3.128,1.2682 -3.077,-2.0247 -7.2403,-3.3133 -11.8507,-3.4782 l 2.5211,-7.9373 6.8272,1.5997 -0.0102,0.0986 c 0,2.0281 1.6575,3.6771 3.6958,3.6771 2.0366,0 3.6924,-1.649 3.6924,-3.6771 0,-2.0281 -1.6575,-3.6788 -3.6924,-3.6788 -1.564,0 -2.8968,0.9758 -3.4357,2.3443 l -7.3593,-1.7255 c -0.3213,-0.0782 -0.6477,0.1071 -0.748,0.4233 L 32,25.212062 c -4.8246,0.0578 -9.1953,1.3566 -12.41,3.4425 -0.8058,-0.7446 -1.8751,-1.2104 -3.0583,-1.2104 -2.4905,0 -4.5152,2.0179 -4.5152,4.4982 0,1.649 0.9061,3.0787 2.2389,3.8607 -0.0884,0.4794 -0.1462,0.9639 -0.1462,1.4569 0,6.6487 8.1736,12.0581 18.2223,12.0581 10.0487,0 18.224,-5.4094 18.224,-12.0581 0,-0.4658 -0.0493,-0.9248 -0.1275,-1.377 1.4144,-0.7599 2.3885,-2.2304 2.3885,-3.9406 z m -29.2808,3.0872 c 0,-1.4756 1.207,-2.6775 2.6894,-2.6775 1.4824,0 2.6877,1.2019 2.6877,2.6775 0,1.4756 -1.2053,2.6758 -2.6877,2.6758 -1.4824,0 -2.6894,-1.2002 -2.6894,-2.6758 z m 15.4037,7.9373 c -1.3549,1.3481 -3.4816,2.0043 -6.5008,2.0043 l -0.0221,-0.0051 -0.0221,0.0051 c -3.0209,0 -5.1476,-0.6562 -6.5008,-2.0043 -0.2465,-0.2448 -0.2465,-0.6443 0,-0.8891 0.2465,-0.2465 0.6477,-0.2465 0.8942,0 1.105,1.0999 2.9393,1.6337 5.6066,1.6337 l 0.0221,0.0051 0.0221,-0.0051 c 2.6673,0 4.5016,-0.5355 5.6066,-1.6354 0.2465,-0.2465 0.6477,-0.2448 0.8942,0 0.2465,0.2465 0.2465,0.6443 0,0.8908 z m -0.3213,-5.2615 c -1.4824,0 -2.6877,-1.2002 -2.6877,-2.6758 0,-1.4756 1.2053,-2.6775 2.6877,-2.6775 1.4824,0 2.6877,1.2019 2.6877,2.6775 0,1.4756 -1.2053,2.6758 -2.6877,2.6758 z" fill="white"></path></svg></button></div><article><h1>JS Massive code reuse - part 1</h1><h2>Massive workspaces</h2><p><img alt="JS Massive Code Reuse" src="/static/media/js-massive-code-reuse-cover.png"/></p><p>This <strong>Code reuse</strong> series is composed of seven small posts:</p><ol><li><strong>Massive workspaces</strong></li><li><strong>Massive git submodules (coming soon)</strong></li><li><strong>Massive publishing to npm and github (coming soon)</strong></li><li><strong>Massive secrets management (coming soon)</strong></li><li><strong>Massive modularization of your code (coming soon)</strong></li><li><strong>Massive bundling with rollup (coming soon)</strong></li><li><strong>Massively scaling it up (coming soon)</strong></li></ol><p>They all reveal a <strong>very simple</strong> workflow that I sharpened up for the last 4 years. It enables to manage highly reusable code we have been writing for international institutions but for small presentational websites as well. This series was written for developers who already know the basics of JS. </p><p>I made this series as simple as possible, cutting it down to the bare minimum and removing all extraneous complexity, so yeah we end up with pretty easy stuff don&#x27;t be surprised!</p><h3>Why so massive?</h3><p>Of course it&#x27;s <strong>massive</strong> to be catchy, but also because in my experience it can handle a lot of code without flaws.</p><h3>What we will avoid</h3><ul><li>Setup webpack aliases</li><li>Starting from zero for each project</li><li>Manually edit stuff inside <code>node_modules</code></li><li>Switch libraries/frameworks in desperation for maintainability and time saving</li><li>Spend hours debugging stuff caused by symlinks and inconsistent local packages dependencies</li></ul><h2>Motivation</h2><p>How do we usually keep motivated as developers? We try new things (aka. the cool new JS gadget)!
I believe there are better ways to stay motivated. But more importantly, there are simple ways to save time and stay motivated using the same libraries/frameworks for years (it works for me at least).</p><p>In my opinon, libraries/frameworks are just tools to get the job done. Changing these tools too often is like nailing jello to a tree. You better keep them forever and sharpen them up! Here is the workflow that works for me, I hope it works for you too.</p><h2>Workspaces</h2><p>A pretty amazing feature I stumbled upon a couple of years ago is Yarn Workspaces. Don&#x27;t run away when I say <code>yarn</code> (it boomed then everyone went back to npm at some point), what follows is <strong>not supported at all in npm</strong>.</p><p>These workspaces will enable you to easily create and manage hundreds of local packages than can be reused across all your projects. Basically you&#x27;ll be able to easily &quot;convert&quot; everything to packages, eventually publish them to github or npm, and install them anywhere.</p><p>Here is our future project hierarchy:</p><div id="code-snippet" type="large" class="sc-AxirZ iekZH"><div class="sc-AxiKw eSbheu"><span role="img" aria-label="copy" class="anticon anticon-copy"><svg viewBox="64 64 896 896" focusable="false" class="" data-icon="copy" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></span></div><pre style="color:#f8f8f2;background:#2E3440;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code style="color:#f8f8f2;background:none;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#636f88">// Our top level parent directory</span><span>
</span>federator
<span></span><span class="token" style="color:#81A1C1">.</span><span>
</span><span></span><span class="token property-access">â”‚</span><span>    </span><span class="token" style="color:#636f88">// Workspace of our first app</span><span>
</span><span>â”œâ”€â”€ app</span><span class="token" style="color:#81A1C1">-</span><span>alpha
</span><span>â”‚   â””â”€â”€ </span><span class="token" style="color:#81A1C1">package</span><span class="token" style="color:#81A1C1">.</span><span class="token property-access">json</span><span>
</span>â”‚
<span>â”‚   </span><span class="token" style="color:#636f88">// Workspace of packages to be consumed by the client</span><span>
</span><span>â”œâ”€â”€ packs</span><span class="token" style="color:#81A1C1">-</span><span>client
</span><span>â”‚   â””â”€â”€ </span><span class="token" style="color:#81A1C1">package</span><span class="token" style="color:#81A1C1">.</span><span class="token property-access">json</span><span>
</span>â”‚
<span>â”‚   </span><span class="token" style="color:#636f88">// Workspace of packages to be consumed by the server</span><span>
</span><span>â”œâ”€â”€ packs</span><span class="token" style="color:#81A1C1">-</span><span>server
</span><span>â”‚   â””â”€â”€ </span><span class="token" style="color:#81A1C1">package</span><span class="token" style="color:#81A1C1">.</span><span class="token property-access">json</span><span>
</span>â”‚
<span>â”‚   </span><span class="token" style="color:#636f88">// Contains the definition of our workspaces</span><span>
</span><span>â””â”€â”€ </span><span class="token" style="color:#81A1C1">package</span><span class="token" style="color:#81A1C1">.</span><span class="token property-access">json</span></code></pre></div><p>By workspace, I mean the directory that is treated as a workspace by yarn (more explanation below).</p><h3>Install yarn</h3><p>Please follow the <a href="https://classic.yarnpkg.com/en/docs/install">official instructions to install yarn</a> or specific instructions to use it with <code>nvm</code> (you should install it without including <code>node</code> then).</p><h3>Configure workspaces</h3><p>In <strong>federator/package.json</strong></p><p>Create a <code>workspaces</code> object that defines which of the children directories is a workspace to be handled by lerna.</p><div id="code-snippet" type="large" class="sc-AxirZ iekZH"><div class="sc-AxiKw eSbheu"><span role="img" aria-label="copy" class="anticon anticon-copy"><svg viewBox="64 64 896 896" focusable="false" class="" data-icon="copy" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></span></div><pre style="color:#f8f8f2;background:#2E3440;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code style="color:#f8f8f2;background:none;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#81A1C1">{</span><span>
</span><span>	</span><span class="token" style="color:#81A1C1">&quot;name&quot;</span><span class="token" style="color:#81A1C1">:</span><span> </span><span class="token" style="color:#A3BE8C">&quot;federator&quot;</span><span class="token" style="color:#81A1C1">,</span><span>
</span><span>	</span><span class="token" style="color:#81A1C1">&quot;description&quot;</span><span class="token" style="color:#81A1C1">:</span><span> </span><span class="token" style="color:#A3BE8C">&quot;Manages (almost) all codes of the company ðŸ˜Ž&quot;</span><span class="token" style="color:#81A1C1">,</span><span>
</span><span>	</span><span class="token" style="color:#81A1C1">&quot;version&quot;</span><span class="token" style="color:#81A1C1">:</span><span> </span><span class="token" style="color:#A3BE8C">&quot;0.0.1&quot;</span><span class="token" style="color:#81A1C1">,</span><span>
</span><span>	</span><span class="token" style="color:#81A1C1">&quot;license&quot;</span><span class="token" style="color:#81A1C1">:</span><span> </span><span class="token" style="color:#A3BE8C">&quot;MIT&quot;</span><span class="token" style="color:#81A1C1">,</span><span>
</span><span>	</span><span class="token" style="color:#81A1C1">&quot;private&quot;</span><span class="token" style="color:#81A1C1">:</span><span> </span><span class="token" style="color:#81A1C1">true</span><span class="token" style="color:#81A1C1">,</span><span>
</span><span>	</span><span class="token" style="color:#81A1C1">&quot;workspaces&quot;</span><span class="token" style="color:#81A1C1">:</span><span> </span><span class="token" style="color:#81A1C1">{</span><span>
</span><span>		</span><span class="token" style="color:#81A1C1">&quot;packages&quot;</span><span class="token" style="color:#81A1C1">:</span><span> </span><span class="token" style="color:#81A1C1">[</span><span>
</span><span>			</span><span class="token" style="color:#A3BE8C">&quot;app-*&quot;</span><span class="token" style="color:#81A1C1">,</span><span>
</span><span>			</span><span class="token" style="color:#A3BE8C">&quot;packs-*&quot;</span><span>
</span><span>		</span><span class="token" style="color:#81A1C1">]</span><span class="token" style="color:#81A1C1">,</span><span>
</span><span>		</span><span class="token" style="color:#81A1C1">&quot;nohoist&quot;</span><span class="token" style="color:#81A1C1">:</span><span> </span><span class="token" style="color:#81A1C1">[</span><span class="token" style="color:#81A1C1">]</span><span>
</span><span>	</span><span class="token" style="color:#81A1C1">}</span><span class="token" style="color:#81A1C1">,</span><span>
</span><span>	</span><span class="token" style="color:#81A1C1">&quot;dependencies&quot;</span><span class="token" style="color:#81A1C1">:</span><span> </span><span class="token" style="color:#81A1C1">{</span><span class="token" style="color:#81A1C1">}</span><span class="token" style="color:#81A1C1">,</span><span>
</span><span>	</span><span class="token" style="color:#81A1C1">&quot;devDependencies&quot;</span><span class="token" style="color:#81A1C1">:</span><span> </span><span class="token" style="color:#81A1C1">{</span><span class="token" style="color:#81A1C1">}</span><span>
</span><span></span><span class="token" style="color:#81A1C1">}</span></code></pre></div><p>In <strong>packs-server/package.json</strong></p><div id="code-snippet" type="large" class="sc-AxirZ iekZH"><div class="sc-AxiKw eSbheu"><span role="img" aria-label="copy" class="anticon anticon-copy"><svg viewBox="64 64 896 896" focusable="false" class="" data-icon="copy" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></span></div><pre style="color:#f8f8f2;background:#2E3440;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code style="color:#f8f8f2;background:none;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#81A1C1">{</span><span>
</span><span>	</span><span class="token" style="color:#81A1C1">&quot;name&quot;</span><span class="token" style="color:#81A1C1">:</span><span> </span><span class="token" style="color:#A3BE8C">&quot;packs-server&quot;</span><span class="token" style="color:#81A1C1">,</span><span>
</span><span>	</span><span class="token" style="color:#81A1C1">&quot;version&quot;</span><span class="token" style="color:#81A1C1">:</span><span> </span><span class="token" style="color:#A3BE8C">&quot;0.0.1&quot;</span><span class="token" style="color:#81A1C1">,</span><span>
</span><span>	</span><span class="token" style="color:#81A1C1">&quot;license&quot;</span><span class="token" style="color:#81A1C1">:</span><span> </span><span class="token" style="color:#A3BE8C">&quot;MIT&quot;</span><span class="token" style="color:#81A1C1">,</span><span>
</span><span>	</span><span class="token" style="color:#81A1C1">&quot;dependencies&quot;</span><span class="token" style="color:#81A1C1">:</span><span> </span><span class="token" style="color:#81A1C1">{</span><span>
</span><span>		</span><span class="token" style="color:#81A1C1">&quot;lodash&quot;</span><span class="token" style="color:#81A1C1">:</span><span> </span><span class="token" style="color:#A3BE8C">&quot;4.17.20&quot;</span><span>
</span><span>	</span><span class="token" style="color:#81A1C1">}</span><span>
</span><span></span><span class="token" style="color:#81A1C1">}</span></code></pre></div><p>In <strong>packs-client/package.json</strong></p><div id="code-snippet" type="large" class="sc-AxirZ iekZH"><div class="sc-AxiKw eSbheu"><span role="img" aria-label="copy" class="anticon anticon-copy"><svg viewBox="64 64 896 896" focusable="false" class="" data-icon="copy" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></span></div><pre style="color:#f8f8f2;background:#2E3440;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code style="color:#f8f8f2;background:none;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#81A1C1">{</span><span>
</span><span>	</span><span class="token" style="color:#81A1C1">&quot;name&quot;</span><span class="token" style="color:#81A1C1">:</span><span> </span><span class="token" style="color:#A3BE8C">&quot;packs-client&quot;</span><span class="token" style="color:#81A1C1">,</span><span>
</span><span>	</span><span class="token" style="color:#81A1C1">&quot;version&quot;</span><span class="token" style="color:#81A1C1">:</span><span> </span><span class="token" style="color:#A3BE8C">&quot;0.0.1&quot;</span><span class="token" style="color:#81A1C1">,</span><span>
</span><span>	</span><span class="token" style="color:#81A1C1">&quot;license&quot;</span><span class="token" style="color:#81A1C1">:</span><span> </span><span class="token" style="color:#A3BE8C">&quot;MIT&quot;</span><span class="token" style="color:#81A1C1">,</span><span>
</span><span>	</span><span class="token" style="color:#81A1C1">&quot;dependencies&quot;</span><span class="token" style="color:#81A1C1">:</span><span> </span><span class="token" style="color:#81A1C1">{</span><span>
</span><span>		</span><span class="token" style="color:#81A1C1">&quot;lodash&quot;</span><span class="token" style="color:#81A1C1">:</span><span> </span><span class="token" style="color:#A3BE8C">&quot;4.17.20&quot;</span><span>
</span><span>	</span><span class="token" style="color:#81A1C1">}</span><span>
</span><span></span><span class="token" style="color:#81A1C1">}</span></code></pre></div><p>In <strong>app-alpha/package.json</strong></p><div id="code-snippet" type="large" class="sc-AxirZ iekZH"><div class="sc-AxiKw eSbheu"><span role="img" aria-label="copy" class="anticon anticon-copy"><svg viewBox="64 64 896 896" focusable="false" class="" data-icon="copy" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></span></div><pre style="color:#f8f8f2;background:#2E3440;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code style="color:#f8f8f2;background:none;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#81A1C1">{</span><span>
</span><span>	</span><span class="token" style="color:#81A1C1">&quot;name&quot;</span><span class="token" style="color:#81A1C1">:</span><span> </span><span class="token" style="color:#A3BE8C">&quot;app-alpha&quot;</span><span class="token" style="color:#81A1C1">,</span><span>
</span><span>	</span><span class="token" style="color:#81A1C1">&quot;version&quot;</span><span class="token" style="color:#81A1C1">:</span><span> </span><span class="token" style="color:#A3BE8C">&quot;0.0.1&quot;</span><span class="token" style="color:#81A1C1">,</span><span>
</span><span>	</span><span class="token" style="color:#81A1C1">&quot;license&quot;</span><span class="token" style="color:#81A1C1">:</span><span> </span><span class="token" style="color:#A3BE8C">&quot;MIT&quot;</span><span class="token" style="color:#81A1C1">,</span><span>
</span><span>	</span><span class="token" style="color:#81A1C1">&quot;dependencies&quot;</span><span class="token" style="color:#81A1C1">:</span><span> </span><span class="token" style="color:#81A1C1">{</span><span>
</span><span>		</span><span class="token" style="color:#81A1C1">&quot;lodash&quot;</span><span class="token" style="color:#81A1C1">:</span><span> </span><span class="token" style="color:#A3BE8C">&quot;4.17.20&quot;</span><span>
</span><span>	</span><span class="token" style="color:#81A1C1">}</span><span>
</span><span></span><span class="token" style="color:#81A1C1">}</span></code></pre></div><h3>Install dependencies</h3><p>Now that all our packages were created, open the terminal, and run the following command in <code>federator/</code>:</p><div id="code-snippet" type="small" class="sc-AxirZ cZIxqM"><div class="sc-AxiKw eSbheu"><span role="img" aria-label="copy" class="anticon anticon-copy"><svg viewBox="64 64 896 896" focusable="false" class="" data-icon="copy" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></span></div><pre style="color:#f8f8f2;background:#2E3440;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code style="color:#f8f8f2;background:none;font-family:&quot;Fira Code&quot;, Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>yarn</span></code></pre></div><p>You will notice that the following workspaces have no <code>node_modules</code>!</p><ul><li><code>app-alpha/</code></li><li><code>packs-client/</code></li><li><code>packs-server/</code></li></ul><p>That&#x27;s absolutely normal. The common dependencies (only <code>lodash</code> for now), have been installed higher in the hierarchy, in <code>federator/node_modules/</code>. This is called <a href="https://classic.yarnpkg.com/blog/2018/02/15/nohoist/">hoisting</a>.</p><h3><strong>Yes, our workspaces are already fully setup and working! ðŸŽ‰</strong></h3><p><a href="https://twitter.com/astenmies">Follow me on Twitter</a> to be kept updated when <strong>Part 2 - Massive version management</strong> comes out. That would also help to get started me because I&#x27;m very new to Twitter.</p></article></main><footer style="margin-top:64px">Â© <!-- -->2020<!-- --> mies ðŸ”¥</footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"content":"# JS Massive code reuse - part 1\n## Massive workspaces\n\n![JS Massive Code Reuse](/static/media/js-massive-code-reuse-cover.png)\n\nThis **Code reuse** series is composed of seven small posts:\n\n1. **Massive workspaces**\n2. **Massive git submodules (coming soon)**\n3. **Massive publishing to npm and github (coming soon)**\n4. **Massive secrets management (coming soon)**\n5. **Massive modularization of your code (coming soon)**\n6. **Massive bundling with rollup (coming soon)**\n7. **Massively scaling it up (coming soon)**\n\nThey all reveal a **very simple** workflow that I sharpened up for the last 4 years. It enables to manage highly reusable code we have been writing for international institutions but for small presentational websites as well. This series was written for developers who already know the basics of JS. \n\nI made this series as simple as possible, cutting it down to the bare minimum and removing all extraneous complexity, so yeah we end up with pretty easy stuff don't be surprised!\n\n### Why so massive?\n\nOf course it's **massive** to be catchy, but also because in my experience it can handle a lot of code without flaws.\n\n### What we will avoid\n\n- Setup webpack aliases\n- Starting from zero for each project\n- Manually edit stuff inside `node_modules`\n- Switch libraries/frameworks in desperation for maintainability and time saving\n- Spend hours debugging stuff caused by symlinks and inconsistent local packages dependencies\n\n## Motivation\n\nHow do we usually keep motivated as developers? We try new things (aka. the cool new JS gadget)!\nI believe there are better ways to stay motivated. But more importantly, there are simple ways to save time and stay motivated using the same libraries/frameworks for years (it works for me at least).\n\nIn my opinon, libraries/frameworks are just tools to get the job done. Changing these tools too often is like nailing jello to a tree. You better keep them forever and sharpen them up! Here is the workflow that works for me, I hope it works for you too.\n\n## Workspaces\n\nA pretty amazing feature I stumbled upon a couple of years ago is Yarn Workspaces. Don't run away when I say `yarn` (it boomed then everyone went back to npm at some point), what follows is **not supported at all in npm**.\n\nThese workspaces will enable you to easily create and manage hundreds of local packages than can be reused across all your projects. Basically you'll be able to easily \"convert\" everything to packages, eventually publish them to github or npm, and install them anywhere.\n\nHere is our future project hierarchy:\n\n```js\n// Our top level parent directory\nfederator\n.\nâ”‚    // Workspace of our first app\nâ”œâ”€â”€ app-alpha\nâ”‚   â””â”€â”€ package.json\nâ”‚\nâ”‚   // Workspace of packages to be consumed by the client\nâ”œâ”€â”€ packs-client\nâ”‚   â””â”€â”€ package.json\nâ”‚\nâ”‚   // Workspace of packages to be consumed by the server\nâ”œâ”€â”€ packs-server\nâ”‚   â””â”€â”€ package.json\nâ”‚\nâ”‚   // Contains the definition of our workspaces\nâ””â”€â”€ package.json\n```\n\nBy workspace, I mean the directory that is treated as a workspace by yarn (more explanation below).\n\n### Install yarn\n\nPlease follow the [official instructions to install yarn](https://classic.yarnpkg.com/en/docs/install) or specific instructions to use it with `nvm` (you should install it without including `node` then).\n\n### Configure workspaces\n\nIn **federator/package.json**\n\nCreate a `workspaces` object that defines which of the children directories is a workspace to be handled by lerna.\n\n```json\n{\n\t\"name\": \"federator\",\n\t\"description\": \"Manages (almost) all codes of the company ðŸ˜Ž\",\n\t\"version\": \"0.0.1\",\n\t\"license\": \"MIT\",\n\t\"private\": true,\n\t\"workspaces\": {\n\t\t\"packages\": [\n\t\t\t\"app-*\",\n\t\t\t\"packs-*\"\n\t\t],\n\t\t\"nohoist\": []\n\t},\n\t\"dependencies\": {},\n\t\"devDependencies\": {}\n}\n```\n\nIn **packs-server/package.json**\n\n```json\n{\n\t\"name\": \"packs-server\",\n\t\"version\": \"0.0.1\",\n\t\"license\": \"MIT\",\n\t\"dependencies\": {\n\t\t\"lodash\": \"4.17.20\"\n\t}\n}\n```\n\nIn **packs-client/package.json**\n\n```json\n{\n\t\"name\": \"packs-client\",\n\t\"version\": \"0.0.1\",\n\t\"license\": \"MIT\",\n\t\"dependencies\": {\n\t\t\"lodash\": \"4.17.20\"\n\t}\n}\n```\n\nIn **app-alpha/package.json**\n\n```json\n{\n\t\"name\": \"app-alpha\",\n\t\"version\": \"0.0.1\",\n\t\"license\": \"MIT\",\n\t\"dependencies\": {\n\t\t\"lodash\": \"4.17.20\"\n\t}\n}\n```\n\n### Install dependencies\n\nNow that all our packages were created, open the terminal, and run the following command in `federator/`:\n\n```sh\nyarn\n```\n\nYou will notice that the following workspaces have no `node_modules`!\n\n- `app-alpha/`\n- `packs-client/`\n- `packs-server/`\n\nThat's absolutely normal. The common dependencies (only `lodash` for now), have been installed higher in the hierarchy, in `federator/node_modules/`. This is called [hoisting](https://classic.yarnpkg.com/blog/2018/02/15/nohoist/).\n\n### **Yes, our workspaces are already fully setup and working! ðŸŽ‰**\n\n[Follow me on Twitter](https://twitter.com/astenmies) to be kept updated when **Part 2 - Massive version management** comes out. That would also help to get started me because I'm very new to Twitter.\n\n","frontmatter":{"title":"JS Massive code reuse - part 1","subtitle":"Massive workspaces","description":"Reuse massive amounts of code in all your projects","language":"js","author":{"firstname":"Asten","lastname":"Mies","twitter":"astenmies"},"social":{"image":"https://blog.mies.co/static/media/js-massive-code-reuse-twitter.png"},"tags":["javascript","modules","developers"],"dateCreated":"2020-08-21T00:00:00.000Z","dateUpdated":"2020-08-21T00:00:00.000Z","dateLast":"2020-08-21T00:00:00.000Z","dateCreatedHuman":"21 Aug 2020","dateUpdatedHuman":"21 Aug 2020","dateLastHuman":"21 Aug 2020"}},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"js-massive-code-reuse"},"buildId":"hndSxUE1alembfaClELaK","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-fb76e01784b5bc957e7c.js"></script><script src="/_next/static/chunks/main-b859014e82ed87364a2e.js" async=""></script><script src="/_next/static/chunks/webpack-3866a5765bde9782de2a.js" async=""></script><script src="/_next/static/chunks/framework.a5d4ffe593e18b49243e.js" async=""></script><script src="/_next/static/chunks/commons.b19af3ffebb408f580f7.js" async=""></script><script src="/_next/static/chunks/733641c3ea325c7dc13fdbe1e1ad4ebfa12ebc95.9ecd42dbbfb8fb85cf95.js" async=""></script><script src="/_next/static/chunks/pages/_app-9ae67f25a20b040b1046.js" async=""></script><script src="/_next/static/chunks/9f96d65d.a303a7816d409d6bc67f.js" async=""></script><script src="/_next/static/chunks/1173eff4538ab0eae4f3f506dea9a7965770ad37.dbf64113d589543ca3d1.js" async=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-5815d22373be2c19dbbb.js" async=""></script><script src="/_next/static/hndSxUE1alembfaClELaK/_buildManifest.js" async=""></script><script src="/_next/static/hndSxUE1alembfaClELaK/_ssgManifest.js" async=""></script></body></html>